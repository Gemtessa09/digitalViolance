<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Report Incident - ReportSafe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="/images/shield-icon.svg" />
  </head>
  <body class="bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen">
    <!-- Trust Banner -->
    <div class="bg-blue-900 text-white text-center py-2 px-4">
      <p class="text-sm">
        üîí <strong>Your report is encrypted</strong> - You can submit
        anonymously
      </p>
    </div>

    <!-- Navigation -->
    <nav class="bg-white shadow-md">
      <div class="container mx-auto px-4">
        <div class="flex justify-between items-center py-3">
          <div class="flex items-center space-x-2">
            <a
              href="/"
              class="flex items-center space-x-2 text-gray-800 hover:text-blue-600 transition"
            >
              <div class="bg-blue-600 p-1.5 rounded-lg">
                <svg
                  class="w-6 h-6 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                  ></path>
                </svg>
              </div>
              <span class="font-bold">ReportSafe</span>
            </a>
          </div>

          <div class="flex items-center space-x-4">
            <a
              href="index.html"
              class="text-gray-700 hover:text-blue-600 text-sm"
              >‚Üê Back to Home</a
            >
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Report Form -->
    <main class="container mx-auto px-4 py-8">
      <div class="max-w-4xl mx-auto">
        <!-- Page Header -->
        <div class="text-center mb-10">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            Report Digital Violence Incident
          </h1>
          <p class="text-gray-600">
            Fill out this secure form to report harassment, threats, or abuse.
            All information is encrypted.
          </p>
        </div>

        <!-- Form Progress -->
        <div class="mb-10 bg-white rounded-xl shadow-lg p-6">
          <div class="flex justify-between items-center mb-4">
            <div class="text-center">
              <div
                class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center mx-auto mb-2 font-bold"
              >
                1
              </div>
              <p class="text-sm font-medium text-blue-600">Incident Details</p>
            </div>
            <div class="flex-1 h-1 bg-gray-200 mx-4"></div>
            <div class="text-center">
              <div
                class="w-10 h-10 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center mx-auto mb-2 font-bold"
              >
                2
              </div>
              <p class="text-sm text-gray-500">Evidence</p>
            </div>
            <div class="flex-1 h-1 bg-gray-200 mx-4"></div>
            <div class="text-center">
              <div
                class="w-10 h-10 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center mx-auto mb-2 font-bold"
              >
                3
              </div>
              <p class="text-sm text-gray-500">Review & Submit</p>
            </div>
          </div>
        </div>

        <!-- Incident Report Form -->
        <form id="reportForm" class="space-y-8">
          <!-- Section 1: Incident Type -->
          <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            <div class="flex items-center mb-6">
              <div class="bg-blue-100 p-2 rounded-lg mr-4">
                <span class="text-blue-600 text-xl">üìã</span>
              </div>
              <div>
                <h2 class="text-xl font-bold text-gray-900">
                  Incident Information
                </h2>
                <p class="text-gray-600 text-sm">
                  Select the type of digital violence you're reporting
                </p>
              </div>
            </div>

            <!-- Incident Type Selection -->
            <div class="mb-6">
              <label class="block text-gray-700 mb-4 font-bold">
                Type of Digital Violence *
                <span class="text-gray-500 font-normal text-sm"
                  >(Select one or more that apply)</span
                >
              </label>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <label
                  class="border border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex items-start"
                >
                  <input
                    type="checkbox"
                    name="incidentType"
                    value="harassment"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium">Harassment</p>
                    <p class="text-gray-600 text-sm mt-1">
                      Repeated unwanted contact or messages
                    </p>
                  </div>
                </label>

                <label
                  class="border border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex items-start"
                >
                  <input
                    type="checkbox"
                    name="incidentType"
                    value="threats"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium">Online Threats</p>
                    <p class="text-gray-600 text-sm mt-1">
                      Threats of violence or harm
                    </p>
                  </div>
                </label>

                <label
                  class="border border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex items-start"
                >
                  <input
                    type="checkbox"
                    name="incidentType"
                    value="image_abuse"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium">Image-Based Abuse</p>
                    <p class="text-gray-600 text-sm mt-1">
                      Sharing intimate images without consent
                    </p>
                  </div>
                </label>

                <label
                  class="border border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex items-start"
                >
                  <input
                    type="checkbox"
                    name="incidentType"
                    value="cyberstalking"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium">Cyberstalking</p>
                    <p class="text-gray-600 text-sm mt-1">
                      Persistent monitoring or tracking
                    </p>
                  </div>
                </label>

                <label
                  class="border border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex items-start"
                >
                  <input
                    type="checkbox"
                    name="incidentType"
                    value="doxxing"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium">Doxxing</p>
                    <p class="text-gray-600 text-sm mt-1">
                      Publishing private information
                    </p>
                  </div>
                </label>

                <label
                  class="border border-gray-300 rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex items-start"
                >
                  <input
                    type="checkbox"
                    name="incidentType"
                    value="deepfake"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium">Deepfake Abuse</p>
                    <p class="text-gray-600 text-sm mt-1">
                      AI-generated fake content
                    </p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Date and Time -->
            <div class="grid md:grid-cols-2 gap-6 mb-6">
              <div>
                <label class="block text-gray-700 mb-2 font-medium"
                  >When did it happen? *</label
                >
                <input
                  type="date"
                  name="incidentDate"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                  required
                />
              </div>
              <div>
                <label class="block text-gray-700 mb-2 font-medium"
                  >Approximate Time</label
                >
                <input
                  type="time"
                  name="incidentTime"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                />
              </div>
            </div>

            <!-- Platform/Where it happened -->
            <div class="mb-6">
              <label class="block text-gray-700 mb-2 font-medium"
                >Where did it happen? *</label
              >
              <div class="space-y-2">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                  <label class="flex items-center">
                    <input
                      type="checkbox"
                      name="platform"
                      value="facebook"
                      class="mr-2 h-4 w-4 text-blue-600"
                    />
                    <span>Facebook</span>
                  </label>
                  <label class="flex items-center">
                    <input
                      type="checkbox"
                      name="platform"
                      value="instagram"
                      class="mr-2 h-4 w-4 text-blue-600"
                    />
                    <span>Instagram</span>
                  </label>
                  <label class="flex items-center">
                    <input
                      type="checkbox"
                      name="platform"
                      value="whatsapp"
                      class="mr-2 h-4 w-4 text-blue-600"
                    />
                    <span>WhatsApp</span>
                  </label>
                  <label class="flex items-center">
                    <input
                      type="checkbox"
                      name="platform"
                      value="twitter"
                      class="mr-2 h-4 w-4 text-blue-600"
                    />
                    <span>Twitter/X</span>
                  </label>
                </div>
                <input
                  type="text"
                  name="otherPlatform"
                  placeholder="Other platform or website"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition mt-2"
                />
              </div>
            </div>

            <!-- Description -->
            <div>
              <label class="block text-gray-700 mb-2 font-medium">
                Describe what happened *
                <span class="text-gray-500 font-normal text-sm"
                  >(Be as detailed as possible)</span
                >
              </label>
              <textarea
                name="description"
                rows="6"
                placeholder="Please include: What happened, who was involved, specific words or messages used, how it made you feel, any patterns you've noticed..."
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                required
              ></textarea>
              <p class="text-gray-500 text-sm mt-2">
                Include specific details like usernames, links, or particular
                messages if possible.
              </p>
            </div>
          </div>

          <!-- Section 2: Evidence Upload -->
          <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            <div class="flex items-center mb-6">
              <div class="bg-blue-100 p-2 rounded-lg mr-4">
                <span class="text-blue-600 text-xl">üìé</span>
              </div>
              <div>
                <h2 class="text-xl font-bold text-gray-900">Evidence Upload</h2>
                <p class="text-gray-600 text-sm">
                  Upload screenshots, photos, or videos of the incident
                </p>
              </div>
            </div>

            <!-- Image Upload -->
            <div class="mb-8">
              <h3 class="font-bold text-gray-800 mb-4">
                Images (Screenshots, Photos)
              </h3>
              <div
                id="imageDropzone"
                class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition cursor-pointer bg-gray-50"
              >
                <div class="text-4xl mb-4 text-gray-400">üñºÔ∏è</div>
                <p class="text-gray-600 font-medium">Drag & drop images here</p>
                <p class="text-gray-500 text-sm mt-2">
                  or <span class="text-blue-600">click to browse</span>
                </p>
                <p class="text-gray-500 text-xs mt-1">
                  Supports JPG, PNG, GIF up to 10MB each
                </p>
                <input
                  type="file"
                  id="imageUpload"
                  name="images[]"
                  multiple
                  accept="image/*"
                  class="hidden"
                />
              </div>

              <!-- Preview Container -->
              <div
                id="imagePreview"
                class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 hidden"
              >
                <!-- Image previews will be added here -->
              </div>
            </div>

            <!-- Video Upload -->
            <div>
              <h3 class="font-bold text-gray-800 mb-4">Videos</h3>
              <div class="grid md:grid-cols-2 gap-6">
                <!-- Upload Video File -->
                <div
                  id="videoDropzone"
                  class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition cursor-pointer bg-gray-50"
                >
                  <div class="text-4xl mb-4 text-gray-400">üìπ</div>
                  <p class="font-medium text-gray-700">Upload Video File</p>
                  <p class="text-gray-500 text-sm mt-2">MP4, MOV up to 100MB</p>
                  <input
                    type="file"
                    id="videoUpload"
                    name="videos[]"
                    multiple
                    accept="video/*"
                    class="hidden"
                  />
                </div>

                <!-- Record Video -->
                <a
                  href="recorder.html"
                  class="border-2 border-dashed border-blue-200 bg-blue-50 rounded-xl p-6 text-center hover:bg-blue-100 transition cursor-pointer group"
                >
                  <div class="text-4xl mb-4 text-blue-500">üé•</div>
                  <p class="font-medium text-blue-700">Record Video Evidence</p>
                  <p class="text-blue-600 text-sm mt-2">
                    Use your camera directly
                  </p>
                  <div class="mt-3">
                    <span
                      class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                    >
                      Recommended for live evidence
                    </span>
                  </div>
                </a>
              </div>

              <!-- Video Preview -->
              <div id="videoPreview" class="mt-4 hidden">
                <!-- Video previews will be added here -->
              </div>
            </div>

            <div
              class="mt-6 p-4 bg-yellow-50 border border-yellow-100 rounded-lg"
            >
              <p class="text-yellow-800 text-sm">
                <span class="font-bold">Note:</span> Evidence helps reviewers
                understand your case better. If you don't have evidence now, you
                can still submit your report.
              </p>
            </div>
          </div>

          <!-- Section 3: Your Information (Optional) -->
          <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            <div class="flex items-center mb-6">
              <div class="bg-blue-100 p-2 rounded-lg mr-4">
                <span class="text-blue-600 text-xl">üë§</span>
              </div>
              <div>
                <h2 class="text-xl font-bold text-gray-900">
                  Your Information (Optional)
                </h2>
                <p class="text-gray-600 text-sm">
                  You can submit anonymously or provide contact details
                </p>
              </div>
            </div>

            <!-- Anonymous Option -->
            <div class="mb-6 p-4 bg-blue-50 rounded-lg">
              <label class="flex items-start cursor-pointer">
                <input
                  type="checkbox"
                  id="anonymousToggle"
                  name="anonymous"
                  class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded focus:ring-blue-500"
                />
                <div>
                  <p class="font-medium text-gray-800">Submit Anonymously</p>
                  <p class="text-gray-600 text-sm mt-1">
                    No personal information will be collected. You'll receive a
                    Case ID for tracking, but we won't be able to contact you
                    with updates.
                  </p>
                </div>
              </label>
            </div>

            <!-- Contact Form (Hidden by default) -->
            <div id="contactForm" class="space-y-6">
              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-gray-700 mb-2 font-medium"
                    >Name (Optional)</label
                  >
                  <input
                    type="text"
                    name="name"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                  />
                </div>
                <div>
                  <label class="block text-gray-700 mb-2 font-medium"
                    >Email Address</label
                  >
                  <input
                    type="email"
                    name="email"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                    placeholder="For case updates and follow-up"
                  />
                </div>
              </div>

              <div>
                <label class="block text-gray-700 mb-2 font-medium"
                  >Phone Number (Optional)</label
                >
                <input
                  type="tel"
                  name="phone"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
                  placeholder="Only used if urgent contact is needed"
                />
              </div>
            </div>

            <!-- Privacy Options -->
            <div class="mt-8 p-6 bg-gray-50 rounded-lg">
              <h3 class="font-bold text-gray-800 mb-4">
                üõ°Ô∏è Privacy Preferences
              </h3>
              <div class="space-y-4">
                <label class="flex items-start">
                  <input
                    type="checkbox"
                    name="privacy_no_evidence_storage"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium text-gray-800">
                      Delete evidence after case resolution
                    </p>
                    <p class="text-gray-600 text-sm mt-1">
                      Uploaded images/videos will be permanently deleted once
                      your case is closed
                    </p>
                  </div>
                </label>
                <label class="flex items-start">
                  <input
                    type="checkbox"
                    name="privacy_no_data_share"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                    checked
                  />
                  <div>
                    <p class="font-medium text-gray-800">
                      Do not share data with third parties
                    </p>
                    <p class="text-gray-600 text-sm mt-1">
                      Your report data will only be accessible to authorized
                      reviewers
                    </p>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <!-- Consent and Submission -->
          <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            <div class="mb-6">
              <h3 class="font-bold text-gray-800 mb-4">
                Consent and Submission
              </h3>

              <div class="space-y-4">
                <label class="flex items-start cursor-pointer">
                  <input
                    type="checkbox"
                    name="consent_accurate"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                    required
                  />
                  <div>
                    <p class="font-medium text-gray-800">
                      I confirm this report is accurate to the best of my
                      knowledge
                    </p>
                    <p class="text-gray-600 text-sm mt-1">
                      I understand that false reports may have legal
                      consequences
                    </p>
                  </div>
                </label>

                <label class="flex items-start cursor-pointer">
                  <input
                    type="checkbox"
                    name="consent_privacy"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                    required
                  />
                  <div>
                    <p class="font-medium text-gray-800">
                      I understand the privacy policy and how my data will be
                      used
                    </p>
                    <p class="text-gray-600 text-sm mt-1">
                      Read our
                      <a href="#" class="text-blue-600 hover:underline"
                        >Privacy Policy</a
                      >
                    </p>
                  </div>
                </label>

                <label class="flex items-start cursor-pointer">
                  <input
                    type="checkbox"
                    name="consent_emergency"
                    class="mt-1 mr-3 h-5 w-5 text-blue-600 rounded"
                  />
                  <div>
                    <p class="font-medium text-gray-800">
                      This is an emergency requiring immediate attention
                    </p>
                    <p class="text-gray-600 text-sm mt-1">
                      Check this only if you're in immediate danger. For
                      emergencies, also contact local authorities.
                    </p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Submit Button -->
            <div
              class="flex flex-col sm:flex-row justify-between items-center pt-6 border-t gap-4"
            >
              <a
                href="/"
                class="px-6 py-3 text-gray-700 font-medium hover:text-gray-900 transition"
              >
                Cancel and Return Home
              </a>
              <div class="flex items-center space-x-4">
                <button
                  type="button"
                  id="saveDraftBtn"
                  class="px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition"
                >
                  Save as Draft
                </button>
                <button
                  type="submit"
                  class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-10 rounded-lg shadow-md hover:shadow-lg transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                  id="submitBtn"
                >
                  Submit Report
                </button>
              </div>
            </div>

            <p class="text-gray-500 text-sm text-center mt-6">
              After submission, you'll receive a unique Case ID.
              <strong>Save it securely</strong> to track your report.
            </p>
          </div>
        </form>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white mt-12 py-8">
      <div class="container mx-auto px-4">
        <div class="text-center">
          <p class="mb-2">ReportSafe - Digital Violence Reporting System</p>
          <p class="text-gray-400 text-sm">
            If you're in immediate danger, contact local authorities: 911 (US)
            or your local emergency number
          </p>
        </div>
      </div>
    </footer>

    <!-- JavaScript for Form Functionality -->
    <script>
      // Toggle anonymous submission
      const anonymousToggle = document.getElementById("anonymousToggle");
      const contactForm = document.getElementById("contactForm");

      anonymousToggle.addEventListener("change", function () {
        contactForm.style.display = this.checked ? "none" : "block";
      });

      // Initialize with anonymous checked
      contactForm.style.display = "none";

      // Image Upload Handling
      const imageDropzone = document.getElementById("imageDropzone");
      const imageUpload = document.getElementById("imageUpload");
      const imagePreview = document.getElementById("imagePreview");

      imageDropzone.addEventListener("click", () => imageUpload.click());
      imageDropzone.addEventListener("dragover", (e) => {
        e.preventDefault();
        imageDropzone.classList.add("border-blue-500", "bg-blue-50");
      });
      imageDropzone.addEventListener("dragleave", () => {
        imageDropzone.classList.remove("border-blue-500", "bg-blue-50");
      });
      imageDropzone.addEventListener("drop", (e) => {
        e.preventDefault();
        imageDropzone.classList.remove("border-blue-500", "bg-blue-50");
        handleFiles(e.dataTransfer.files, "image");
      });

      imageUpload.addEventListener("change", (e) => {
        handleFiles(e.target.files, "image");
      });

      // Video Upload Handling
      const videoDropzone = document.getElementById("videoDropzone");
      const videoUpload = document.getElementById("videoUpload");
      const videoPreview = document.getElementById("videoPreview");

      videoDropzone.addEventListener("click", () => videoUpload.click());
      videoDropzone.addEventListener("dragover", (e) => {
        e.preventDefault();
        videoDropzone.classList.add("border-blue-500", "bg-blue-50");
      });
      videoDropzone.addEventListener("dragleave", () => {
        videoDropzone.classList.remove("border-blue-500", "bg-blue-50");
      });
      videoDropzone.addEventListener("drop", (e) => {
        e.preventDefault();
        videoDropzone.classList.remove("border-blue-500", "bg-blue-50");
        handleFiles(e.dataTransfer.files, "video");
      });

      videoUpload.addEventListener("change", (e) => {
        handleFiles(e.target.files, "video");
      });

      // File handling function
      function handleFiles(files, type) {
        const previewContainer = type === "image" ? imagePreview : videoPreview;

        if (files.length > 0) {
          previewContainer.classList.remove("hidden");

          for (let file of files) {
            // Check file size
            const maxSize =
              type === "image" ? 10 * 1024 * 1024 : 100 * 1024 * 1024; // 10MB for images, 100MB for videos
            if (file.size > maxSize) {
              alert(
                `File ${file.name} exceeds maximum size limit (${
                  type === "image" ? "10MB" : "100MB"
                })`
              );
              continue;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
              const fileElement = createFileElement(
                file,
                e.target.result,
                type
              );
              previewContainer.appendChild(fileElement);
            };
            reader.readAsDataURL(file);
          }
        }
      }

      function createFileElement(file, dataURL, type) {
        const div = document.createElement("div");
        div.className =
          "relative border border-gray-200 rounded-lg overflow-hidden";

        if (type === "image") {
          div.innerHTML = `
                    <img src="${dataURL}" alt="${
            file.name
          }" class="w-full h-32 object-cover">
                    <div class="p-2 bg-white">
                        <p class="text-xs truncate">${file.name}</p>
                        <p class="text-xs text-gray-500">${(
                          file.size /
                          (1024 * 1024)
                        ).toFixed(2)} MB</p>
                        <button type="button" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600">
                            √ó
                        </button>
                    </div>
                `;
        } else {
          div.innerHTML = `
                    <div class="bg-gray-800 h-32 flex items-center justify-center">
                        <span class="text-white text-4xl">üé¨</span>
                    </div>
                    <div class="p-2 bg-white">
                        <p class="text-xs truncate">${file.name}</p>
                        <p class="text-xs text-gray-500">${(
                          file.size /
                          (1024 * 1024)
                        ).toFixed(2)} MB</p>
                        <button type="button" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600">
                            √ó
                        </button>
                    </div>
                `;
        }

        // Add remove functionality
        div.querySelector("button").addEventListener("click", () => {
          div.remove();
          if (previewContainer.children.length === 0) {
            previewContainer.classList.add("hidden");
          }
        });

        return div;
      }

      // Form submission
      const reportForm = document.getElementById("reportForm");
      const submitBtn = document.getElementById("submitBtn");

      reportForm.addEventListener("submit", async function (e) {
        e.preventDefault();

        // Disable submit button
        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";

        // Validate required fields
        const incidentTypes = document.querySelectorAll(
          'input[name="incidentType"]:checked'
        );
        if (incidentTypes.length === 0) {
          alert("Please select at least one type of digital violence");
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Report";
          return;
        }

        if (
          !document.querySelector('input[name="consent_accurate"]:checked') ||
          !document.querySelector('input[name="consent_privacy"]:checked')
        ) {
          alert("Please check all required consent boxes");
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Report";
          return;
        }

        // In a real application, you would send the form data to your server here
        // For now, simulate submission
        setTimeout(() => {
          alert(
            "Report submitted successfully! You will be redirected to receive your Case ID."
          );
          window.location.href = "/user/success";
        }, 1500);
      });

      // Save draft functionality
      document
        .getElementById("saveDraftBtn")
        .addEventListener("click", function () {
          // In a real app, save to localStorage or send to server
          alert(
            "Draft saved locally. You can return later to complete your report."
          );
        });
    </script>
  </body>
</html>
